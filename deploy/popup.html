<html>
<head>
	<title>Sculpting Palette</title>
	<style>
		body{
			background-color: #444;
			font-family: sans-serif;
		}
		#title{
			text-align: center;
			font-size: 48px;
			background-color: #888;
		}
		.colSlider{
			width:48px;
			height:400px;
			display: inline-block;
			background-color: #000;
			position: relative;
			margin: 4px;
		}
		.colSliderInnerGrad{
			width: 100%;
			height: 100%;
			position: absolute;
		}
		#hueSliderGrad{
			background: linear-gradient(to bottom,
				hsl(0,  100%,50%),
				hsl(30, 100%,50%),
				hsl(60, 100%,50%),
				hsl(90, 100%,50%),
				hsl(120,100%,50%),
				hsl(150,100%,50%),
				hsl(180,100%,50%),
				hsl(210,100%,50%),
				hsl(240,100%,50%),
				hsl(270,100%,50%),
				hsl(300,100%,50%),
				hsl(330,100%,50%),
				hsl(360,100%,50%)
			);
		}
		#satSliderGradFront{
			background: linear-gradient(to bottom,
				rgba(127,127,127,0),
				rgba(127,127,127,1)
			);
		}
		#satSliderGradBack{
			background-color: #0F0;
		}
		#litSliderGradFront{
			background: linear-gradient(to bottom,
				rgba(255,255,255,1),
				rgba(255,255,255,0) 50%,
				rgba(0,0,0,0) 50%,
				rgba(0,0,0,1)
			);
		}
		#litSliderGradBack{
			background-color: #00F;
		}
		
		.colSliderMarker{
			position: absolute;
			height: 2px;
			width: 100%;
			
			box-shadow: 0 0 0 2px rgba(0,0,0,1), 0 0 0 4px rgba(256,256,256,1), 0 0 0 6px rgba(0,0,0,1);
		}
		
		#colResult{
			background-color: #F0F;
			height: 60px;
		}
	</style>
</head>
<body>
	<div id="title">SculpTogether Palette</div>
	<table><tr>
		<td>
			<div id="hueSlider" class="colSlider">
				<div class="colSliderInnerGrad" id="hueSliderGrad">&nbsp;</div>
				<div class="colSliderMarker" id="hueMarker"></div>
			</div>
			<div id="satSlider" class="colSlider">
				<div class="colSliderInnerGrad" id="satSliderGradBack">&nbsp;</div>
				<div class="colSliderInnerGrad" id="satSliderGradFront">&nbsp;</div>
				<div class="colSliderMarker" id="satMarker"></div>
			</div>
			<div id="litSlider" class="colSlider">
				<div class="colSliderInnerGrad" id="litSliderGradBack">&nbsp;</div>
				<div class="colSliderInnerGrad" id="litSliderGradFront">&nbsp;</div>
				<div class="colSliderMarker" id="litMarker"></div>
			</div>
			<div id="colResult">&nbsp;</div>
		</td>
		<td>
			b
		</td>
		<td>
			c
		</td>
	</tr></table>
	
	<script>
		
		function setUpSlider(id){
			
			var sliderDiv = document.getElementById(id+"Slider");
			var sliderDisp = document.getElementById(id+"Marker");
			
			var sliderMax = sliderDiv.clientHeight;
			
			var fracVal = 0;
			
			sliderDiv.addEventListener('mousedown',function(e){
				
				var oldY = -99999;
				
				function moveFunc(e){
					var newY = e.pageY-sliderDiv.offsetTop;
					newY = Math.max(0,newY);
					newY = Math.min(newY,sliderMax);
					if (newY == oldY) return;
					
					fracVal = newY/sliderMax;
					sliderDisp.style.top = newY-1;
					
					refreshColDisplay(false);
					
					oldY = newY;
				}
				function releaseFunc(e){
					document.body.removeEventListener('mousemove',moveFunc);
					document.body.removeEventListener('mouseup',releaseFunc);
					refreshColDisplay(true);
				}
				
				moveFunc(e);
				document.body.addEventListener('mousemove',moveFunc);
				document.body.addEventListener('mouseup',releaseFunc);
				
			});
			
			var info = {};
			info.getVal = function(){
				return fracVal;
			}
			
			return info;
			
		}
		var sliderH = setUpSlider("hue");
		var sliderS = setUpSlider("sat");
		var sliderL = setUpSlider("lit");
		
		var sDisp = document.getElementById("satSliderGradBack");
		var lDisp = document.getElementById("litSliderGradBack");
		var cDisp = document.getElementById("colResult");
		function refreshColDisplay(tellServer){
			var h = sliderH.getVal();
			var s = sliderS.getVal();
			var l = sliderL.getVal();
			sDisp.style.backgroundColor = "hsl("+(h*360)+",100%,50%)";
			lDisp.style.backgroundColor = "hsl("+(h*360)+","+((1-s)*100)+"%,50%)";
			cDisp.style.backgroundColor = "hsl("+(h*360)+","+((1-s)*100)+"%,"+((1-l)*100)+"%)";
		}
		refreshColDisplay();
		
	</script>
	
</body>
</html>